<turbo-frame id="tracking">
  <div class="row justify-content-center mb-5">
    <div class="col-auto">
      <div class="card">
        <h3 class="text-center card-header">Document Tracking</h3>
        <div class="card-body">
          <div class="table table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Position</th>
                  <th>#Named</th>
                  <th>Commendations</th>
                  <th>Exceptions</th>
                  <th>#Awarded</th>
                  <th>Commendations</th>
                  <th>Exceptions</th>
                  <th>#Awarded Self</th>
                </tr>
              </thead>
              <tbody>
                <% User.all.order(position_id: :asc, first_name: :asc).each do |user| %>
                  <% if user.employee_named_documentations.any? || user.awarded_by_documentations.any? %>
                    <tr>
                      <td><%= user.full_name %></td>
                      <td><%= user.position.name %></td>
                      <td><%= user.employee_named_documentations.size %></td>
                      <td><%= user.employee_named_documentations.where(documentation_type: "Commendation").size %></td>
                      <td><%= user.employee_named_documentations.where(documentation_type: "Exception").size %></td>
                      <td><%= user.awarded_by_documentations.size %></td>
                      <td><%= user.awarded_by_documentations.where(documentation_type: "Commendation").size %></td>
                      <td><%= user.awarded_by_documentations.where(documentation_type: "Exception").size %></td>
                      <td><%= self_awarded(user) %></td>
                    </tr>
                  <% end %>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</turbo-frame>